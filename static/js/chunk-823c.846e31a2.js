(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-823c"],{"31v3":function(t,n,e){},mqFu:function(t,n,e){"use strict";var a=e("31v3");e.n(a).a},oSe1:function(t,n,e){"use strict";e.r(n);var a=e("tOHB"),i=e("ppSp");for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);e("mqFu");var o=e("KHd+"),r=Object(o.a)(i.default,a.a,a.b,!1,null,"5910e8b8",null);r.options.__file="domains.vue",n.default=r.exports},ppSp:function(t,n,e){"use strict";e.r(n);var a=e("rWN6"),i=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(n,t,(function(){return a[t]}))}(s);n.default=i.a},rWN6:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,i,s,o,r,u,c,l=g(e("4d7F")),d=g(e("14Xm")),f=g(e("D3Ub")),p=g(e("0dc3")),h=g(e("YgiN")),m=g(e("uQfT"));function g(t){return t&&t.__esModule?t:{default:t}}n.default={data:function(){return{cns:null,bnb:null,eth:null,pageSize:10,defaultPage:1,domains:[],subDomains:[],noDomain:!1,loading:null,domainBalance:0}},created:function(){console.log("domains"),console.log(this.domainBalance)},mounted:(c=(0,f.default)(d.default.mark((function t(){var n;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this,this.$nextTick((0,f.default)(d.default.mark((function t(){return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isConflux){t.next=6;break}return n.cns=new h.default,t.next=4,n.loadConfluxDomainCount();case 4:t.next=9;break;case 6:return n.tns=new m.default(n.web3Account,n.chainType),t.next=9,n.loadWeb3DomainCount();case 9:case"end":return t.stop()}}),t,this)}))));case 2:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),computed:{hasDomain:function(){return this.domainsData.length>0},web3Account:function(){return this.$store.state.web3.account},isConflux:function(){return this.$store.state.web3.walletType==p.default.CONFLUXPORTAL},chainType:function(){return this.$store.state.web3.chainType},currentCFXPage:function(){return this.$store.state.data.currentCFXDomainPage},currentBNBPage:function(){return this.$store.state.data.currentBNBDomainPage},domainsData:function(){return this.$store.state.data.domainsData},chainChanged:function(){return this.$store.state.web3.chainType},walletChanged:function(){return this.$store.state.web3.walletType}},watch:{domainsData:function(){this.closeLoading()},domainBalance:function(){this.handleCurrentChange(this.defaultPage)},chainChanged:function(){console.log("wallet changed1"),this.$store.dispatch("updateCFXDomainPage",0),this.$store.dispatch("updateBNBDomainPage",0),this.init()},walletChanged:function(){console.log("wallet changed2"),this.$store.dispatch("updateCFXDomainPage",0),this.$store.dispatch("updateBNBDomainPage",0),this.init()}},methods:{init:function(){var t=this;this.$nextTick((0,f.default)(d.default.mark((function n(){return d.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isConflux){n.next=6;break}return t.cns=new h.default,n.next=4,t.loadConfluxDomainCount();case 4:n.next=9;break;case 6:return t.tns=new m.default(t.web3Account,t.chainType),n.next=9,t.loadWeb3DomainCount();case 9:case"end":return n.stop()}}),n,this)}))))},load:(u=(0,f.default)(d.default.mark((function t(){return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isConflux){t.next=6;break}return this.cns=new h.default,t.next=4,this.loadConfluxDomainCount();case 4:t.next=9;break;case 6:return this.tns=new m.default(this.web3Account,this.chainType),t.next=9,this.loadWeb3DomainCount();case 9:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)}),handleCurrentChange:(r=(0,f.default)(d.default.mark((function t(n){var e,a;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(this.currentCFXPage),console.log(n),!this.isConflux){t.next=7;break}if(this.currentCFXPage!=n){t.next=5;break}return t.abrupt("return");case 5:t.next=9;break;case 7:if(this.currentBNBPage!=n){t.next=9;break}return t.abrupt("return");case 9:e=this.domainBalance-(n-1)*this.pageSize-1,(a=this.domainBalance-n*this.pageSize)<0&&(a=0),this.isConflux?this.loadConfluxTokenURIByIndex(n,e,a):this.loadWeb3TokenURIByIndex(n,e,a);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),loadWeb3DomainCount:(o=(0,f.default)(d.default.mark((function t(){var n;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.tns||this.load(),console.log("-----from bnb-------"),t.next=4,this.tns.balanceOf(this.web3Account);case 4:n=t.sent,console.log(n),this.domainBalance=n/1,this.domainBalance>0?this.noDomain=!1:this.noDomain=!0;case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),loadWeb3TokenURIByIndex:(s=(0,f.default)(d.default.mark((function t(n,e,a){var i,s,o,r,u=this;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.tns||this.load(),i=[],s=e;s>=a;s--)i.push(s);return console.log(i),this.openLoading(),o=this,r=i.map(function(){var t=(0,f.default)(d.default.mark((function t(n){var e,a,i,s;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.tns.tokenOfOwnerByIndex(u.web3Account,n);case 2:return e=t.sent,t.next=5,o.tns.tokenURI(e);case 5:return a=t.sent,i={},2==(s=a.split(".")).length?(i.type=s[1].toUpperCase(),i.uri=s[0]+"."+s[1],i.tokenId=e.toString(),i.isSubDomain=!1,i.parent=s[1]):3==s.length&&(i.type=s[2].toUpperCase(),i.uri=s[0]+"."+s[1]+"."+s[2],i.tokenId=e.toString(),i.isSubDomain=!0,i.parent=s[1]+"."+s[2]),t.abrupt("return",i);case 10:case"end":return t.stop()}}),t,u)})));return function(n){return t.apply(this,arguments)}}()),t.next=9,l.default.all(r).then((function(t){o.$store.dispatch("updateBNBDomainPage",n),o.$store.dispatch("updateDomainData",t)}));case 9:case"end":return t.stop()}}),t,this)}))),function(t,n,e){return s.apply(this,arguments)}),loadConfluxDomainCount:(i=(0,f.default)(d.default.mark((function t(){var n;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.cns||this.load(),t.next=3,this.cns.balanceOf(this.web3Account);case 3:n=t.sent,this.domainBalance=n/1,this.domainBalance>0?this.noDomain=!1:this.noDomain=!0;case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),loadConfluxTokenURIByIndex:(a=(0,f.default)(d.default.mark((function t(n,e,a){var i,s,o,r,u,c,p=this;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.cns||this.load(),""!=this.web3Account){t.next=6;break}return i=this.$t("app.error"),s=this.$t("app.errorNoConnect"),this.$notify.error({title:i,message:s,duration:2e3,position:"bottom-right"}),t.abrupt("return");case 6:for(o=[],r=e;r>=a;r--)o.push(r);return console.log(o),this.openLoading(),u=this,c=o.map(function(){var t=(0,f.default)(d.default.mark((function t(n){var e,a,i,s;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.cns.tokenOfOwnerByIndex(p.web3Account,n);case 2:return e=t.sent,t.next=5,u.cns.tokenURI(e);case 5:return a=t.sent,i={},2==(s=a.split(".")).length?(i.type=s[1].toUpperCase(),i.uri=s[0]+"."+s[1],i.tokenId=e.toString(),i.isSubDomain=!1,i.parent=s[1]):3==s.length&&(i.type=s[2].toUpperCase(),i.uri=s[0]+"."+s[1]+"."+s[2],i.tokenId=e.toString(),i.isSubDomain=!0,i.parent=s[1]+"."+s[2]),t.abrupt("return",i);case 10:case"end":return t.stop()}}),t,p)})));return function(n){return t.apply(this,arguments)}}()),t.next=14,l.default.all(c).then((function(t){u.$store.dispatch("updateCFXDomainPage",n),u.$store.dispatch("updateDomainData",t)}));case 14:case"end":return t.stop()}}),t,this)}))),function(t,n,e){return a.apply(this,arguments)}),manageDomain:function(t){console.log(t),this.$router.push({path:"/domain/"+t})},openLoading:function(){var t=this.$t("app.loading");this.loading=this.$loading({lock:!0,text:t,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var n=this;setTimeout((function(){n.closeLoading()}),1e4)},closeLoading:function(){this.loading.close()},remove:function(t){console.log(t)},subTokenUri:function(t){return t.slice(0,10)+"..."+t.slice(-6)},doCopy:function(t){var n=this.$t("app.copySuccess");this.$copyText(t).then((function(t){this.$message({message:n,type:"success"})}),(function(t){console.log(t)}))},onCopy:function(){var t=this.$t("app.copySuccess");this.$message({message:t,type:"success"})},onSubmit:function(){this.$message("submit!")},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}}},tOHB:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[t.web3Account?e("div",{staticClass:"my-domains"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("app.myDomains")))]),t._v(" "),e("div",{staticClass:"total"})]),t._v(" "),e("div",{staticClass:"right"})]):t._e(),t._v(" "),t.hasDomain?e("div",[e("div",{staticClass:"title-row"},[e("div",{staticClass:"left"},[e("div",{staticClass:"token-uri"},[t._v(t._s(t.$t("auction.domain")))]),t._v(" "),e("div",{staticClass:"token-id"},[t._v(t._s(t.$t("auction.domain"))+" ID")])])]),t._v(" "),t._l(t.domainsData,(function(n,a){return e("div",{staticClass:"domains-row"},[e("div",{staticClass:"left"},[e("div",{staticClass:"token-uri"},[t._v(t._s(n.uri))]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.tokenId,placement:"top"}},[e("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:n.tokenId,expression:"domain.tokenId",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"token-id"},[t._v(t._s(t.subTokenUri(n.tokenId))+" ")])])],1),t._v(" "),e("div",{staticClass:"right"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.manageDomain(n.uri)}}},[t._v(t._s(t.$t("app.managerDomain")))])],1)])})),t._v(" "),e("el-pagination",{attrs:{"hide-on-single-page":!0,background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.domainBalance},on:{"current-change":t.handleCurrentChange}})],2):t._e(),t._v(" "),t.noDomain?e("div",{staticClass:"error-domains-row"},[e("span",[e("svg-icon",{attrs:{"icon-class":"information"}})],1),t._v(" "),e("span",[t._v(t._s(t.$t("app.noDomainYet")))])]):t._e(),t._v(" "),t.web3Account?t._e():e("div",{staticClass:"error-domains-row"},[e("span",[e("svg-icon",{attrs:{"icon-class":"information"}})],1),t._v(" "),e("span",[t._v(t._s(t.$t("app.errorNoConnect")))])])])},i=[];e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return i}))}}]);