(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2e94"],{Ddmz:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.supportTld=["cfx","bnb"];e.default={supportTld:i}},Iawr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Notification=void 0;var i=a(s("iCc5")),n=a(s("V7oC"));function a(t){return t&&t.__esModule?t:{default:t}}var r=e.Notification=function(){function t(){(0,i.default)(this,t)}return(0,n.default)(t,null,[{key:"notify",value:function(t,e,s,i,n){t.$notify({title:e,message:s,type:i,duration:n})}},{key:"info",value:function(t,e,s,i){t.$notify.info({title:e,message:s,duration:i})}},{key:"success",value:function(t,e,s,i){t.$notify({title:e,message:s,type:"success",duration:i})}},{key:"error",value:function(t,e,s,i){t.$notify.error({title:e,message:s,duration:i})}}]),t}();e.default=r},Jml6:function(t,e,s){"use strict";s.r(e);var i=s("TaJd"),n=s.n(i);for(var a in i)"default"!==a&&function(t){s.d(e,t,(function(){return i[t]}))}(a);e.default=n.a},TNfx:function(t,e,s){},TaJd:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n,a,r,o,c,u,l=x(s("14Xm")),p=x(s("D3Ub")),d=s("Iawr"),h=s("3Ci3"),f=s("kB5k"),v=x(s("0dc3")),g=x(s("WEEN")),y=x(s("mG4U")),b=s("Ddmz"),m=x(s("YgiN")),_=x(s("uQfT")),w=s("ewEw");x(s("+zsH"));function x(t){return t&&t.__esModule?t:{default:t}}e.default={components:{collapse:g.default},data:function(){return{domains:[],parseDomain:[],isShoudMoreLong:!1,errorTLD:!1,cns:null,cusdt:null,cbuy:null,cusdtBalance:0,busdtBalance:0,isActive:!1,inputPrice:"",isApproved:!1,isApproving:!1,isPaying:!1,isSuccessPayed:!1}},computed:{web3Account:function(){return this.$store.state.web3.account},isConflux:function(){return this.$store.state.web3.walletType==v.default.CONFLUXPORTAL},chainType:function(){return this.$store.state.web3.chainType},inputPrice2:{get:function(){return this.inputPrice},set:function(t){}},confluxUsdtInstance:function(){return this.$store.state.web3.confluxUsdt},buyInstance:function(){return this.$store.state.web3.confluxBuy},trustUsdtInstance:function(){return this.$store.state.web3.bnbUsdt},trustBuyInstance:function(){return this.$store.state.web3.bnbBuy},chainChanged:function(){return this.$store.state.web3.chainType}},mounted:(u=(0,p.default)(l.default.mark((function t(){var e;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this,this.$nextTick((function(){e.init(),e.searchDomain()}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)}),created:function(){this.getEventData()},watch:{inputPrice2:function(){this.init()},chainChanged:function(){console.log("wallet changed"),this.$store.dispatch("updateCFXDomainPage",0),this.$store.dispatch("updateBNBDomainPage",0),this.$nextTick((function(){this.init(),this.searchDomain()}))}},methods:{init:(c=(0,p.default)(l.default.mark((function t(){var e;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isConflux){t.next=9;break}if(this.confluxUsdtInstance){t.next=4;break}return t.next=4,this.$store.dispatch("loadingCfx","CFX");case 4:return t.next=6,this.confluxUsdtInstance.balanceOf(this.web3Account);case 6:this.cusdtBalance=t.sent,t.next=16;break;case 9:if(this.trustUsdtInstance){t.next=12;break}return t.next=12,this.$store.dispatch("loadingBnb",this.web3Account,"BNB");case 12:return t.next=14,this.trustUsdtInstance.balanceOf(this.web3Account);case 14:e=t.sent,this.busdtBalance=e/Math.pow(10,18);case 16:this.getApprovedUSDT();case 17:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),buy:(o=(0,p.default)(l.default.mark((function t(){var e,s,i,n,a=this;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.parseDomain[0].split("."),s=e[0],i=new f.BigNumber(this.inputPrice)*Math.pow(10,18),console.log(s),console.log(i),this.isPaying=!0,d.Notification.info(this,this.$t("search.approve"),this.$t("notify.sureWallet"),5e3),!this.isConflux){t.next=26;break}return t.prev=8,t.next=11,this.buyInstance.buy(s);case 11:this.$store.dispatch("updateCFXDomainPage",0),d.Notification.success(this,this.$t("notify.success"),this.$t("search.buySuccess"),3e3),this.isPaying=!1,this.isSuccessPayed=!0,this.init(),t.next=24;break;case 18:return t.prev=18,t.t0=t.catch(8),console.log(t.t0.code),4001==t.t0.code?d.Notification.error(this,this.$t("app.error"),this.$t("notify.userDenied"),5e3):d.Notification.error(this,this.$t("app.error"),this.$t("notify.payError"),5e3),this.isPaying=!1,t.abrupt("return");case 24:t.next=29;break;case 26:console.log(this.isPaying),n=this,this.trustBuyInstance.buy(s,(function(t,e){})).then(function(){var t=(0,p.default)(l.default.mark((function t(e){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.Notification.success(n,n.$t("notify.success"),n.$t("search.buySuccess"),3e3),a.$store.dispatch("updateBNBDomainPage",0),a.isPaying=!1,a.isSuccessPayed=!0,a.init();case 5:case"end":return t.stop()}}),t,a)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){4001==t.code?d.Notification.error(a,a.$t("app.error"),a.$t("notify.userDenied"),5e3):d.Notification.error(a,a.$t("app.error"),a.$t("notify.payError"),5e3),a.isPaying=!1}));case 29:case"end":return t.stop()}}),t,this,[[8,18]])}))),function(){return o.apply(this,arguments)}),approve:(r=(0,p.default)(l.default.mark((function t(){var e,s=this;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.web3Account){t.next=3;break}return d.Notification.error(this,this.$t("app.error"),this.$t("app.errorNoConnect"),5e3),t.abrupt("return");case 3:if(d.Notification.info(this,this.$t("search.approve"),this.$t("notify.sureWallet"),5e3),this.isApproving=!0,!this.isConflux){t.next=20;break}return t.prev=6,t.next=9,this.confluxUsdtInstance.approve(w.confluxBuy,h.MAX_UINT256);case 9:d.Notification.success(this,this.$t("notify.success"),this.$t("notify.approveSuccess"),5e3),this.getApprovedUSDT(),t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(6),4001==t.t0.code?d.Notification.error(this,this.$t("app.error"),this.$t("notify.userDenied"),5e3):d.Notification.error(this,this.$t("app.error"),this.$t("notify.approveError"),5e3),this.isApproving=!1,t.abrupt("return");case 18:t.next=22;break;case 20:e=this,this.trustUsdtInstance.approve(w.bnbBuyAddress,h.MAX_UINT256,(function(t,e){})).then(function(){var t=(0,p.default)(l.default.mark((function t(i){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.Notification.success(e,e.$t("notify.success"),e.$t("notify.approveSuccess"),5e3),e.getApprovedUSDT();case 2:case"end":return t.stop()}}),t,s)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){4001==t.code?d.Notification.error(e,e.$t("app.error"),e.$t("notify.userDenied"),5e3):d.Notification.error(e,e.$t("app.error"),e.$t("notify.approveError"),5e3),s.isApproving=!1}));case 22:case"end":return t.stop()}}),t,this,[[6,13]])}))),function(){return r.apply(this,arguments)}),getApprovedUSDT:(a=(0,p.default)(l.default.mark((function t(){var e;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.web3Account){t.next=2;break}return t.abrupt("return");case 2:if(!this.isConflux){t.next=10;break}return t.next=5,this.confluxUsdtInstance.allowance(this.web3Account,w.confluxBuy);case 5:e=t.sent,console.log(new f.BigNumber(e/Math.pow(10,18)).toString()),e>=this.inputPrice*Math.pow(10,18)?this.isApproved=!0:this.isApproved=!1,t.next=14;break;case 10:return t.next=12,this.trustUsdtInstance.allowance(this.web3Account,w.bnbBuyAddress);case 12:t.sent>=this.inputPrice*Math.pow(10,18)?this.isApproved=!0:this.isApproved=!1;case 14:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)}),toogle:(n=(0,p.default)(l.default.mark((function t(e){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.inputPrice=e.toFixed(2),this.isActive=!this.isActive,this.isActive&&(this.isApproving=!1,this.isPaying=!1);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)}),searchDomain:function(){""!=this.$route.query.name&&(this.domain=this.$route.query.name,this.$store.dispatch("SearchDomain",this.domain),null!=this.domain&&this.handleTimeOut())},getEventData:function(){var t=this;y.default.$on("searchEventFromSearchBar",(function(e){var s=e;t.domain=s,t.$router.push({path:"/search",query:{name:s}}),t.parseDomainFun(s)}))},parseDomainFun:function(t){this.isSuccessPayed=!1;var e=t.replace(/[^a-z0-9.]/g,"");this.isActive=!1;for(var s=e.length,i=0,n=0;n<s;n++)"."==e.charAt(n)&&(i+=1);if(0==i){var a=new Array;for(var r in b.supportTld)a.push(e+"."+b.supportTld[r]);this.parseDomain=a,this.errorTLD=!1}else{if(1!=i&&2!=i)return this.errorTLD=!0,void console.log("Error TLD");var o=e.split("."),c=o.slice(-1)[0];if(c.length>0&&-1==b.supportTld.indexOf(c))return console.log("Error TLD"),void(this.errorTLD=!0);this.errorTLD=!1;a=new Array;for(var r in b.supportTld)1==i?a.push(o.slice(0,1)[0]+"."+b.supportTld[r]):2==i&&a.push(o.slice(0,1)[0]+"."+o.slice(1,2)[0]+"."+b.supportTld[r]);this.parseDomain=a}this.getDomainInfo(this.parseDomain)},handleTimeOut:function(){var t=this;setTimeout((function(){t.parseDomainFun(t.domain)}),500)},getDomainInfo:(i=(0,p.default)(l.default.mark((function t(e){var s,i,n,a,r,o,c;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.openLoading(),s=new m.default,i=new _.default(this.web3Account,this.chainType),n=[],a=0;case 5:if(!(a<this.parseDomain.length)){t.next=45;break}if(r={},!this.isConflux){t.next=26;break}if(".cfx"!=e[a].substr(-4)){t.next=24;break}return t.next=11,s.exists(e[a]);case 11:o=t.sent,r.isExist=o,r.resolver="",r.tokenURI=e[a],r.owner="owner",r.isPremium=e[a].length<=9,this.isShoudMoreLong=e[a].length<9,c=this.price(e[a]),r.price=c,n.push(r);case 24:t.next=42;break;case 26:if(".bnb"!=e[a].substr(-4)){t.next=42;break}return t.next=29,i.exists(e[a]);case 29:o=t.sent,r.isExist=o,r.resolver="",r.tokenURI=e[a],r.owner="owner",r.isPremium=e[a].length<=9,this.isShoudMoreLong=e[a].length<9,c=this.price(e[a]),r.price=c,n.push(r);case 42:a++,t.next=5;break;case 45:this.domains=n,this.closeLoading();case 47:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)}),price:function(t){var e=t.length-4;return 5==e?250:6==e?100:7==e?60:e>=8?30:void 0},openLoading:function(){var t=this.$t("app.searching");this.loading=this.$loading({lock:!0,text:t,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var e=this;setTimeout((function(){e.closeLoading()}),1e4)},closeLoading:function(){this.loading.close()},awaitWraper:function(t){return t.then((function(t){return[null,t]})).catch((function(t){return[t,null]}))},onSubmit:function(){this.$message("submit!")},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}}},TiIK:function(t,e,s){"use strict";s.r(e);var i=s("aGkz"),n=s("Jml6");for(var a in n)"default"!==a&&function(t){s.d(e,t,(function(){return n[t]}))}(a);s("wAqc");var r=s("KHd+"),o=Object(r.a)(n.default,i.a,i.b,!1,null,"45a51f96",null);o.options.__file="search.vue",e.default=o.exports},WEEN:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="0.3s height ease-in-out, 0.3s padding-top ease-in-out, 0.3s padding-bottom ease-in-out",n={"before-enter":function(t){t.style.transition=i,t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0},enter:function(t){t.dataset.oldOverflow=t.style.overflow,0!==t.scrollHeight?(t.style.height=t.scrollHeight+"px",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.height="",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},"after-enter":function(t){t.style.transition="",t.style.height="",t.style.overflow=t.dataset.oldOverflow},"before-leave":function(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.height=t.scrollHeight+"px",t.style.overflow="hidden"},leave:function(t){0!==t.scrollHeight&&(t.style.transition=i,t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0)},"after-leave":function(t){t.style.transition="",t.style.height="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom}};e.default={name:"collapseTransition",functional:!0,render:function(t,e){var s=e.children;return t("transition",{on:n},s)}}},aGkz:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[t.isShoudMoreLong?s("div",{staticClass:"should-more-long"},[t._v("\n    "+t._s(t.$t("app.pleaseSearch5length"))+"\n  ")]):t._e(),t._v(" "),t._l(t.domains,(function(e,i){return t.errorTLD?t._e():s("div",{staticClass:"search-row-wrapper"},[s("div",{staticClass:"search-domain-row",class:{borderBottomHidden:!t.isActive}},[s("div",{staticClass:"left"},[s("div",{staticClass:"coin-svg"},[".cfx"==e.tokenURI.substr(-4)?s("svg-icon",{attrs:{"icon-class":"cfx"}}):t._e(),t._v(" "),".bnb"==e.tokenURI.substr(-4)?s("svg-icon",{attrs:{"icon-class":"bnb"}}):t._e()],1),t._v(" "),s("div",{staticClass:"coin-domain"},[t._v(t._s(e.tokenURI))])]),t._v(" "),s("div",{staticClass:"right"},[e.isExist?t._e():s("span",{staticClass:"price"},[t._v(t._s(e.price?"$"+e.price:""))]),t._v(" "),e.isPremium?s("span",{staticClass:"premium"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("app.premium"),placement:"top"}},[s("svg-icon",{attrs:{"icon-class":"crown"}})],1)],1):t._e(),t._v(" "),e.isExist?s("el-button",{attrs:{type:"primary",plain:"",loading:!1}},[t._v(t._s(t.$t("app.alreadyRegistry")))]):t._e(),t._v(" "),!e.isExist&&e.tokenURI.length>=9?s("el-button",{attrs:{type:"primary",plain:"",loading:!1},on:{click:function(s){t.toogle(e.price)}}},[t._v(t._s(t.$t("app.avaiableRegistry")))]):t._e(),t._v(" "),e.tokenURI.length<9?s("el-button",{attrs:{type:"primary",plain:"",loading:!1,disabled:""}},[t._v(t._s(t.$t("app.notStart")))]):t._e()],1)]),t._v(" "),s("collapse",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"buy-container"},[s("div",{staticClass:"container"},[s("div",{staticClass:"title"},["CFX"==t.chainType?s("span",[t._v(t._s(t.$t("search.payBycUSDT")))]):t._e(),t._v(" "),"BNB"==t.chainType?s("span",[t._v(t._s(t.$t("search.payByBUSDT")))]):t._e(),t._v(" "),"ETH"==t.chainType?s("span",[t._v(t._s(t.$t("search.payByUSDT")))]):t._e()]),t._v(" "),s("div",{staticClass:"order"},[s("div",{staticClass:"row"},[s("div",{staticClass:"amount"},[s("div",{staticClass:"left"},[t._v(t._s(t.$t("search.amount")))]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.$t("app.balance"))+" "+t._s(t.isConflux?t.cusdtBalance.toFixed(2):t.busdtBalance.toFixed(2))+" \n                    "),"CFX"==t.chainType?s("span",[t._v("cUSDT")]):t._e(),t._v(" "),"BNB"==t.chainType?s("span",[t._v("BUSDT")]):t._e(),t._v(" "),"ETH"==t.chainType?s("span",[t._v("USDT")]):t._e()])]),t._v(" "),s("div",{staticStyle:{"margin-top":"5px"}},[s("el-input",{attrs:{placeholder:""},model:{value:t.inputPrice2,callback:function(e){t.inputPrice2=e},expression:"inputPrice2"}},[s("i",{staticStyle:{display:"flex","align-items":"center",width:"30px",height:"30px","margin-top":"5px"},attrs:{slot:"suffix"},slot:"suffix"},[s("svg-icon",{attrs:{"icon-class":"tether"}})],1)])],1)]),t._v(" "),"CFX"==t.chainType?s("div",{staticClass:"row"},[s("div",{staticClass:"tips"},[s("a",{attrs:{target:"_blank",href:"https://www.confluxscan.io/token/0x8b8689c7f3014a4d86e4d1d0daaf74a47f5e0f27"}},[t._v(t._s(t.$t("search.cUSDTPeg")))])])]):t._e(),t._v(" "),"BNB"==t.chainType?s("div",{staticClass:"row"},[s("div",{staticClass:"tips"},[s("a",{attrs:{target:"_blank",href:"https://bscscan.com/token/0x55d398326f99059ff775485246999027b3197955"}},[t._v(t._s(t.$t("search.bUSDTPeg")))])])]):t._e(),t._v(" "),"ETH"==t.chainType?s("div",{staticClass:"row"},[s("div",{staticClass:"tips"},[s("a",{attrs:{target:"_blank",href:"https://etherscan.io/address/0xdac17f958d2ee523a2206206994597c13d831ec7"}},[t._v(t._s(t.$t("search.USDTPeg")))])])]):t._e()]),t._v(" "),s("div",{staticClass:"button-box",staticStyle:{"margin-top":"5px"}},[t.isApproved?s("el-button",{attrs:{loading:t.isPaying,disabled:t.isSuccessPayed,type:"primary"},on:{click:function(e){t.buy()}}},[t._v(t._s(t.$t("search.pay")))]):t._e(),t._v(" "),t.isApproved?t._e():s("el-button",{attrs:{loading:t.isApproving,plain:"",type:"primary"},on:{click:function(e){t.approve()}}},[t._v(t._s(t.$t("search.approve")))])],1)])])])],1)})),t._v(" "),t.errorTLD?s("div",{staticClass:"search-domain-row"},[s("div",{staticClass:"left"},[s("div",{staticClass:"coin-domain",staticStyle:{color:"#F86161","font-size":"18px"}},[t._v(t._s(t.$t("app.errorTLD")))])])]):t._e(),t._v(" "),0!=t.domains.length||t.errorTLD?t._e():s("div",{staticClass:"error-domains-row"},[s("span",[s("svg-icon",{attrs:{"icon-class":"searching"}})],1),t._v(" "),s("span",[t._v(t._s(t.$t("app.findYourDomain")))])])],2)},n=[];s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return n}))},wAqc:function(t,e,s){"use strict";var i=s("TNfx");s.n(i).a}}]);